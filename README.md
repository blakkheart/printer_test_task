
# üñ® Printer API üñ®

## –û–ø–∏—Å–∞–Ω–∏–µ

 –ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.
 1.  –°–µ—Ä–≤–∏—Å –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ –∏–∑ ERP, —Å–æ–∑–¥–∞—ë—Ç –≤ –ë–î —á–µ–∫–∏ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤ —Ç–æ—á–∫–∏, —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤ –∑–∞–∫–∞–∑–µ, –∏ —Å—Ç–∞–≤–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é PDF-—Ñ–∞–π–ª–æ–≤ –¥–ª—è —ç—Ç–∏—Ö —á–µ–∫–æ–≤. –ï—Å–ª–∏ —É —Ç–æ—á–∫–∏ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–Ω—Ç–µ—Ä–∞ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É. –ï—Å–ª–∏ —á–µ–∫–∏ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ —É–∂–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É.
2.  –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π worker —Å –ø–æ–º–æ—â—å—é wkhtmltopdf –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç PDF-—Ñ–∞–π–ª –∏–∑ HTML-—à–∞–±–ª–æ–Ω–∞. –ò–º—è —Ñ–∞–π–ª–∞ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –≤–∏–¥ <ID –∑–∞–∫–∞–∑–∞>_<—Ç–∏–ø —á–µ–∫–∞>.pdf (123456_client.pdf).
3.  –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö —á–µ–∫–æ–≤. –û–ø—Ä–æ—Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—É—Ç–∏: —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —á–µ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–Ω—Ç–µ—Ä–∞, –ø–æ—Å–ª–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è PDF-—Ñ–∞–π–ª –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–µ–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –ø–µ—á–∞—Ç—å.
 ![enter image description here](https://github.com/smenateam/assignments/blob/master/backend/images/arch.png?raw=true)

## –°—Ç—ç–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- [Django](https://www.djangoproject.com/) ‚Äî –±–∞–∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- [DRF](https://www.django-rest-framework.org/) ‚Äî –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ API.
- [PostgreSQL](https://www.postgresql.org/) ‚Äî –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
- [wkhtmltopdf](https://wkhtmltopdf.org/) ‚Äî –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF –∏–∑ HTML.
- [Requests](https://requests.readthedocs.io/en/latest/) ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å wkhtmltopdf.
- [Redis](https://redis.io/) ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã Celery.
- [Celery](https://docs.celeryq.dev/en/stable/) ‚Äî –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –≤ —Å–≤—è–∑–∫–µ —Å wkhtmltopdf.
- [Docker](https://www.docker.com/) ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- [Nginx](https://www.nginx.com/)  ‚Äî –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Å—Ç–∞—Ç–∏–∫–∏ –≤ docker.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/blakkheart/printer_test_task.git
```
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd printer_test_task
```
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   - Windows
   ```bash
   python -m venv venv
   source venv/Scripts/activate
   ```
   - Linux/macOS
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```
4. –û–±–Ω–æ–≤–∏—Ç–µ [pip](https://pip.pypa.io/en/stable/):
   - Windows
   ```bash
   (venv) python -m pip install --upgrade pip
   ```
   - Linux/macOS
   ```bash
   (venv) python3 -m pip install --upgrade pip
   ```
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ requirements.txt:
   ```bash
   (venv) pip install -r requirements.txt
   ```
–°–æ–∑–¥–∞–π—Ç–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª *.env* –ø–æ –ø—Ä–∏–º–µ—Ä—É —Å —Ñ–∞–π–ª–æ–º *.env.example*, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.



## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ  

1. –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
	```bash
	docker compose up
	```
3. –°–æ–±–µ—Ä–∏—Ç–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏–∫—É:
	```bash
	docker compose exec backend python manage.py collectstatic
	docker compose exec backend cp -r /forfar_app/static/. /backend_static/static/
	```
–ï—Å–ª–∏ –≤—Å–µ —Å–¥–µ–ª–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É localhost:8000 –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ API.
–î–æ—Å—Ç—É–ø–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
 - **localhost:8000/create_checks/**   ‚Äî   POST –∑–∞–ø—Ä–æ—Å
  - **localhost:8000/new_checks/?api_key=<API_KEY>**   ‚Äî   GET –∑–∞–ø—Ä–æ—Å
  - **localhost:8000/check/?api_key=<API_KEY>&check_id=<CHECK_ID>**   ‚Äî   GET –∑–∞–ø—Ä–æ—Å
 - **localhost:8000/admin/**


### API

–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ api.yml (swagger-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è). –ú–æ–∂–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑  [–æ–Ω–ª–∞–π–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä](https://editor.swagger.io/)  –∏–ª–∏ —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–ª–∞–≥–∏–Ω –¥–ª—è PyCharm –∏–ª–∏ VSCode.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ñ–∏–∫—Å—Ç—É—Ä—ã.

–¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ –∞–¥—Ä–µ—Å—É localhost:8000/admin/ :
```bash
docker compose exec backend python manage.py createsuperuser
```

